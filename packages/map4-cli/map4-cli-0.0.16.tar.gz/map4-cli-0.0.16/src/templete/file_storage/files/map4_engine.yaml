lidar:
  lidar_model: vlp32c
  # velodyne: vlp16, vlp16_hires, vlp32c, hdl32e, hdl64e_s2, hdl64e_s3, vls128
  # robosense: RS128
  # Hesai: Pandar40P, PandarXT-32
  # (Hesai don't requires model name because they detect model from the length of packet)
  topic_name: /velodyne_packets
  topic_type: 0   # velodyne_packets: 0, pointcloud2: 1, robosense: 2, hesai_packets: 3
  difop_topic: /ruby/rslidar_packets_difop  # robosense lidar calibration topic
  scan_correction: 1  # None: 0, Trajectory: 1, IMU: 2

  # extra lidar works only when the topic_type is "velodyne_packets"
  use_extra_lidar: false
  extra_lidar:
    tf: [-0.180,0,-0.25,0,-1.57,0]
    lidar_model: vlp32c
    points_topic: /side_vlp16/velodyne_packets # 2nd topic name
    primary_frame_id: top_vlp32
    extra_frame_id: side_vlp16

gnss:
  gnss_model: septentrio  # Type your sensor name here, and it will printed in the report
  topic_name: /nmea_sentence
  gnss_type: 1  # fix: 0, nmea: 1, Eagleye: 2
  min_gnss_status: 4  # fitlered out low reliability messages
  max_gnss_status: 4  # fitlered out low reliability messages
  min_orientation_status: 1  # allow all: 0, Fix-Fix and PSSN: 1, PSSN only: 2
  gnss_plane: 7
  use_mgrs: true
  height_type: 0    # 0: Orthometric, 1: Ellipsoid
  time_sync_thresh: 0.1
  tf_x: 0.0   # TF from GNSS to other
  tf_y: 0.0
  tf_z: 0.0
  tf_roll: 0.0
  tf_pitch: 0.0
  tf_yaw: 0.0

lidar_odometry:
  method_type: 1  # PCL_GENERIC: 0, PCL_ANH: 1, PCL_ANH_GPU: 2
  backward_matching: false
  use_imu_fusion: false # Whether to execute lidar-imu fusion or not
  incremental_voxel_update: true
  use_multi_layer_ndt: true
  use_interpolate_scan_target: false
  verbose: false
  output_div_size: 50   # Trajectory csv will be written in every output_div_size iteration
  ndt_param:
    ndt_res: 2.0
    step_size: 0.1
    trans_eps: 0.01
    max_iter: 100
    voxel_leaf_size: 1.0
    min_scan_range: 2.0
    max_scan_range: 200
    min_add_scan_shift: 1.0
    max_submap_size: 50

imu:
  imu_model: TAG300   # Type your sensor name, and it will be printed in the report
  topic_name: /imu/data_raw
  tf: [1,0,0,0, 0,-1,0,0, 0,0,-1,0, 0,0,0,1]  # map4 default
  noise_a: 1600.0
  noise_w: 9.0
  bias_covariance: 0.01
  ndt_covariance: 0.10
  min_gravity_covariance: 0.05  # DECREASE to use strong gravity correction (1.0 ~ 0.01)
  calibration_gain: 0.01        # DECREASE when tf is reliable

submap_generator:
  keyframe_delta_trans: 8.0
  keyframe_delta_angle: 0.3
  use_gnss: false   # Use GNSS constraint
  fix_first_node: false
  fix_all_node: false
  use_relative_coordinates: false
  min_range: 2.0
  max_range: 100.0
  
graph_optimizer:
  info_matrix_loop_trans: 0.02
  info_matrix_loop_rot: 0.1
  info_matrix_edge_trans: 0.005
  info_matrix_edge_rot: 0.01
  info_matrix_gnss_trans: 0.05
  info_matrix_gnss_rot: 100
  num_graph_optimization_iterations: 1000
  voxel_leaf_size: 1.0
  ndt_res: 2.0
  step_size: 0.1
  trans_eps: 0.01
  max_iter: 100
  score_thresh: 4.5
  auto_dist_thresh: 20
  thread_num: 8
  use_gnss_constraint: false
  gnss_interval: 100  # [m]
  align_distance: 15  # [m]
  align_method: 0   # 0: NDT, 1: ICP->NDT

global_optimizer:
  map_size: 100   # [m]
  global_voxel_leaf_size: 0.1
  append_voxel_leaf_size: 0.05
  merge_voxel_leaf_size: 0.1

pointcloud_assembler:
  interval_size: 0.1
  separate_pcd: true
  map_size: 100000000
  filter_type: 0  # FILTER_OFF: 0(default), CASCASED_GROUND_SEG: 1
  min_scan_range: 2.0
  max_scan_range: 70
  time_threshold: 0.01
  tp_threshold: 0

# For CASCASED_GROUND_SEG
ground_seg:
  sensor_height: 2.00
  max_slope: 10.0
  vertical_thres: 0.08
  remove_floor: false
  plane_dis_thres: 0.3
  n_section: 4
  plane_height_thres: 0.3
  plane_ang_thres: 5.0

pointcloud_divider:
  leaf_size: 0.1
  grid_size: 100

tf_dump:
  parent_frame: map
  child_frame: base_link
  topic_name: /tf
  tf_x: 0.0
  tf_y: 0.0
  tf_z: 0.0
  tf_roll: 0.0
  tf_pitch: 0.0
  tf_yaw: 0.0

eagleye_failure_detector:
  speed_threshold: 1.0  # [m/s]

slam_evaluation:
  tf_x: 0.0
  tf_y: 0.0
  tf_z: 0.0
  tf_roll: 0.0
  tf_pitch: 0.0
  tf_yaw: 0.0
  twist_topic_name: /vehicle/status/twist
  gnss_eval_interval: 100   # [m]
  lidar_gnss_time_threshold: 0.05

slam_gnssimu_fuser:
  time_threshold : 0.01 # [sec]: If the timestamp of the gnssimu is far from the timestamp of the lidar, the gnssimu will not be used.
  fix_status : 4 # (int):The gnss status are stored in the transformation_probability column of the m4e csv format.ï¼ˆnmea_sentence:4, navsatfix:1
  enable_debug: false # If true, abort the process after one pose adjestment
