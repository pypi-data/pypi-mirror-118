(self.webpackChunkjupyter_bifrost=self.webpackChunkjupyter_bifrost||[]).push([[834],{4733:(e,t,i)=>{"use strict";i.d(t,{Z:()=>V});var n=i(5697),r=i.n(n),s=i(6271),o=i.n(s);const a={};function h(e=a,t=a){const i=Object.keys(e),n=Object.keys(t);return e===t||i.length===n.length&&i.every((i=>e[i]===t[i]))}var c=i(869),d=i.n(c);function l(e){const t=new Set;return e.forEach((e=>{Object.keys(e).forEach((e=>{t.add(e)}))})),t}const u=()=>{};function p(e,t){const i=Object.keys(t);return i.forEach((i=>{try{e.addSignalListener(i,t[i])}catch(e){console.warn("Cannot add invalid signal listener.",e)}})),i.length>0}var f=i(4063),w=i.n(f);function g(e,t){const i=Object.keys(t);return i.forEach((i=>{try{e.removeSignalListener(i,t[i])}catch(e){console.warn("Cannot remove invalid signal listener.",e)}})),i.length>0}function v(e){const{spec:t,width:i,height:n}=e;return void 0!==i&&void 0!==n?{...t,width:i,height:n}:void 0!==i?{...t,width:i}:void 0!==n?{...t,height:n}:t}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class y extends o().PureComponent{constructor(...e){super(...e),m(this,"containerRef",o().createRef()),m(this,"viewPromise",void 0),m(this,"handleError",(e=>{const{onError:t=u}=this.props;t(e),console.warn(e)})),m(this,"modifyView",(e=>{this.viewPromise&&this.viewPromise.then((t=>(t&&e(t),!0))).catch(this.handleError)}))}componentDidMount(){this.createView()}componentDidUpdate(e){const t=l([this.props,e]);if(t.delete("className"),t.delete("signalListeners"),t.delete("spec"),t.delete("style"),t.delete("width"),t.delete("height"),Array.from(t).some((t=>this.props[t]!==e[t])))this.clearView(),this.createView();else{const t=function(e,t){if(e===t)return!1;const i={width:!1,height:!1,isExpensive:!1},n=l([e,t]);return!n.has("width")||"width"in e&&"width"in t&&e.width===t.width||("width"in e&&"number"==typeof e.width?i.width=e.width:i.isExpensive=!0),!n.has("height")||"height"in e&&"height"in t&&e.height===t.height||("height"in e&&"number"==typeof e.height?i.height=e.height:i.isExpensive=!0),n.delete("width"),n.delete("height"),[...n].some((i=>!(i in e)||!(i in t)||!w()(e[i],t[i])))&&(i.isExpensive=!0),!(!1===i.width&&!1===i.height&&!i.isExpensive)&&i}(v(this.props),v(e)),{signalListeners:i}=this.props,{signalListeners:n}=e;if(t)if(t.isExpensive)this.clearView(),this.createView();else{const e=!h(i,n);this.modifyView((r=>{!1!==t.width&&r.width(t.width),!1!==t.height&&r.height(t.height),e&&(n&&g(r,n),i&&p(r,i)),r.run()}))}else h(i,n)||this.modifyView((e=>{n&&g(e,n),i&&p(e,i),e.run()}))}}componentWillUnmount(){this.clearView()}createView(){const{spec:e,onNewView:t,signalListeners:i={},width:n,height:r,...s}=this.props;if(this.containerRef.current){const e=v(this.props);this.viewPromise=d()(this.containerRef.current,e,s).then((({view:e})=>(p(e,i)&&e.run(),e))).catch(this.handleError),t&&this.modifyView(t)}}clearView(){return this.modifyView((e=>{e.finalize()})),this.viewPromise=void 0,this}render(){const{className:e,style:t}=this.props;return o().createElement("div",{ref:this.containerRef,className:e,style:t})}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function E(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}m(y,"propTypes",{className:r().string,onError:r().func});class V extends o().PureComponent{constructor(...e){super(...e),E(this,"vegaEmbed",o().createRef()),E(this,"handleNewView",(e=>{this.update();const{onNewView:t=u}=this.props;t(e)}))}componentDidMount(){this.update()}componentDidUpdate(e){h(this.props.data,e.data)||this.update()}update(){const{data:e}=this.props;this.vegaEmbed.current&&e&&Object.keys(e).length>0&&this.vegaEmbed.current.modifyView((t=>{(function(e,t){Object.keys(t).forEach((i=>{!function(e,t,i){var n;i&&((n=i)&&"[object Function]"==={}.toString.call(n)?i(e.data(t)):e.change(t,c.vega.changeset().remove((()=>!0)).insert(i)))}(e,i,t[i])}))})(t,e),t.resize().run()}))}render(){const{data:e,...t}=this.props;return o().createElement(y,b({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))}}E(V,"defaultProps",{data:{}})},8588:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(6271),r=i.n(n),s=i(4733);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function a(e){return r().createElement(s.Z,o({},e,{mode:"vega-lite"}))}},189:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(6271),r=i.n(n),s=i(4733);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function a({mode:e,spec:t}){class i extends r().PureComponent{render(){return r().createElement(s.Z,o({mode:e,spec:t},this.props))}}var n,a,h;return h=function(){return t},(a="getSpec")in(n=i)?Object.defineProperty(n,a,{value:h,enumerable:!0,configurable:!0,writable:!0}):n[a]=h,i}},6423:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Vega:()=>n.Z,VegaLite:()=>r.Z,createClassFromSpec:()=>s.Z});var n=i(4733),r=i(8588),s=i(189),o=i(1171),a={};for(const e in o)["default","Vega","VegaLite","createClassFromSpec"].indexOf(e)<0&&(a[e]=()=>o[e]);i.d(t,a)},1171:(e,t,i)=>{"use strict";i.r(t);var n=i(6951),r={};for(const e in n)"default"!==e&&(r[e]=()=>n[e]);i.d(t,r)},6951:()=>{}}]);