

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Predefined shapes &mdash; VisualShape3D 0.08 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Piont, line and plane" href="PointXLine%20or%20polygon.html" />
    <link rel="prev" title="Creation of Point inside line and plane." href="creating%20point%20ine%20polygon.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> VisualShape3D
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">About VisualShape3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="beforeuse.html">Get started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="creating%20point%20line%20polygon.html">Point, line and polygon</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Predefined shapes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">2D Shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Definition of 2D shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Transformation to 3D space</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PointXLine%20or%20Polygon.html">Point inside line and plane</a></li>
<li class="toctree-l1"><a class="reference internal" href="LineXLine%20or%20Polygon.html">Line agsinst line, plane and polygon</a></li>
<li class="toctree-l1"><a class="reference internal" href="precision.html">Precision control</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VisualShape3D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Predefined shapes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/draw some pictures.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Predefined shapes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>What we use vertices to define polygons, either 3D or 2D, is prone to error. Here, we design some common shapes for wall/roofs in building or/and for solar panels for electricity or thermal fluids, which can be initiated extactly and conveniently by dimensions other than vertices. As stated above, the shapes are described in 2D space and can be moved to their real 3D positions by using function <cite>move()</cite> in VisualShape3D.</p>
<img alt="_images/shapes.PNG" src="_images/shapes.PNG" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All 2D shapes are defined in Shapes, and one has to import it as shown below before initiating any of them.</p>
</div>

<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">VisualShape3D.Shapes</span> <span class="kn">as</span> <span class="nn">shape</span>
</pre>
</div>

<div class="section" id="id2">
<h2>2D shapes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>

<p>At first, we define the simple shapes by dimensions, and their vertices can be calculated as indicated, </p>

<img alt="_images/shape1.PNG" src="_images/shape1.PNG" />
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
W, H = 1.0, 0.5 
shape.rectangle(W,H)
<span class="gp">&gt;&gt;&gt;<span class="go">  array([[0. , 0. , 0. ],
           [0. , 1. , 0. ],
           [0. , 1. , 0.5],
           [0. , 0. , 0.5]])</span>
</pre>
</div>
</div>

<img alt="_images/shape2.PNG" src="_images/shape2.PNG" />
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
A = 0.2
shape.triangle(W,H,A) 
<span class="gp">&gt;&gt;&gt;<span class="go">  array([[0. , 0. , 0. ],
            [0. , 1. , 0. ],
            [0. , 0.2, 0.5]])</span>
</pre>
</div>
</div>

<img alt="_images/shape3.PNG" src="_images/shape3.PNG" height="500" width="500"/>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
B,C = 0.5, 0.2
shape.fourSided(W,H,A,B,C)
<span class="gp">&gt;&gt;&gt;<span class="go">  array([[0. , 0. , 0. ],
            [0. , 1. , 0. ],
            [0. , 0.4, 0.5],
            [0. , 0.2, 0.5]])</span>
</pre>
</div>
</div>

<img alt="_images/shape4.PNG" src="_images/shape4.PNG" />
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
D = 0.5
shape.fiveSided(W,H,A,B,C,D)
<span class="gp">&gt;&gt;&gt;<span class="go">  array([[0. , 0. , 0. ],
            [0. , 1. , 0. ],
            [0. , 1.2, 0.5],
            [0. , 0.7, 0.5],
            [0. , 0.2, 0.5]])</span>
</pre>
</div>
</div>

</pre>
</div>

<p>As shown in these figures, the dimensions of these shapes produce their own vertices in counter-clockwise.loops.</p>
<img alt="_images/local_coordinates.PNG" src="_images/local_coordinates.PNG" height="400" width="400"/>
</div>
<div class="section" id="id3">
<h2>A complex 2D shape<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
For windows/doors/roofs or other walls/panels with opennings, we design a more complex shape.<br> 
<img alt="_images/shapeComplex.PNG" src="_images/shapeComplex.PNG" height="500" width="500"/>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
W,H,A,B,C,D = 1.0,0.5, 0.4, 0.2, 0.2, 0.3
shape.rectangleWithHole(W,H,A,B,C,D)
<span class="gp">&gt;&gt;&gt;<span class="go">  array([[0. , 0. , 0. ],
            [0. , 1. , 0. ],
            [0. , 1. , 0.5],
            [0. , 0.3, 0.5],
            [0. , 0.3, 0.4],
            [0. , 0.7, 0.4],
            [0. , 0.7, 0.2],
            [0. , 0.3, 0.2],
            [0. , 0.3, 0.5],
            [0. , 0. , 0.5]])</span>
</pre>
</div>
</div>

<p><cite>rectangleWithHole(W,H,A,B,C,D)</cite> will not always return 10 vertices, and for the following special cases, it will return vertices as few as possible.</p>
<img alt="_images/shapeComplexSpecials.PNG" src="_images/shapeComplexSpecials.PNG" height="450" width="450"/>
</div>
<p>The following code is for verification of the design.</p>
<img alt="_images/matrix.PNG" src="_images/SpeciaComplexs.PNG" height="440" width="440"/>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
import numpy as np
from VisualShape3D.Shapes import *

def shape2D(W,H,A,B,C,D):
    ret = rectangleWithHole(W,H,A,B,C,D)
    x,y,z = zip(*ret)
    return np.array([y,z])

%matplotlib notebook
import matplotlib.pyplot as plt

fig, axs = plt.subplots(3,3)


W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.0
C = H - B
xs,ys = shape2D(W,H,A,B,C,D)
axs[0,0].set_aspect('equal', 'datalim')
axs[0,0].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[0,0].set_axis_off()
label = f"{xs.size} vertices"
axs[0,0].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.0
C = H - B
D = 0.8
xs,ys = shape2D(W,H,A,B,C,D)
axs[0,1].set_aspect('equal', 'datalim')
axs[0,1].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[0,1].set_axis_off()
label = f"{xs.size} vertices"
axs[0,1].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.0
C = H - B
D = W - A
xs,ys = shape2D(W,H,A,B,C,D)
axs[0,2].set_aspect('equal', 'datalim')
axs[0,2].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[0,2].set_axis_off()
label = f"{xs.size} vertices"
axs[0,2].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.0
xs,ys = shape2D(W,H,A,B,C,D)
axs[1,0].set_aspect('equal', 'datalim')
axs[1,0].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[1,0].set_axis_off()
label = f"{xs.size} vertices"
axs[1,0].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')


W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.8
xs,ys = shape2D(W,H,A,B,C,D)
axs[1,1].set_aspect('equal', 'datalim')
axs[1,1].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[1,1].set_axis_off()
label = f"{xs.size} vertices"
axs[1,1].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.8
D = W - A
xs,ys = shape2D(W,H,A,B,C,D)
axs[1,2].set_aspect('equal', 'datalim')
axs[1,2].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[1,2].set_axis_off()
label = f"{xs.size} vertices"
axs[1,2].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')


W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.8
C = 0
D = 0
xs,ys = shape2D(W,H,A,B,C,D)
axs[2,0].set_aspect('equal', 'datalim')
axs[2,0].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[2,0].set_axis_off()
label = f"{xs.size} vertices"
axs[2,0].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')


W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.8
C = 0
xs,ys = shape2D(W,H,A,B,C,D)
axs[2,1].set_aspect('equal', 'datalim')
axs[2,1].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[2,1].set_axis_off()
label = f"{xs.size} vertices"
axs[2,1].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

W,H,A,B,C,D = 3,2.5,1.5,1.0,0.7,0.8
C = 0
D = W - A
xs,ys = shape2D(W,H,A,B,C,D)
axs[2,2].set_aspect('equal', 'datalim')
axs[2,2].fill(xs, ys, alpha=0.5, fc='r', ec='none')
axs[2,2].set_axis_off()
label = f"{xs.size} vertices"
axs[2,2].annotate(label, (0.1, 0.5), xycoords='axes fraction', va='center')

plt.show()
</pre>
</div>
</div>


<!--
<h3>Function list of 2D shapes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>

<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
def rectangle(*args):
    W = args[0]
    H = args[1]
    return np.array([(0,0,0),(0,W,0),(0,W,H),(0,0,H)])

def triangle(*args):
    W = args[0]
    H = args[1] 
    A = args[2]
    return np.array([(0,0,0),(0,W,0),(0,A,H)])

def rectangleWithHole(*args):
    W = args[0]
    H = args[1] 
    A = args[2]
    B = args[3]
    C = args[4]
    D = args[5]

    if D>0 and C>0 and (A+D)<W and (B+C)<H :
        ret = np.array([(0,0,0),(0,W,0),(0,W,H),(0,D,H),(0,D,B+C),(0,D+A,B+C),(0,D+A,C),(0,D,C),(0,D,H),(0,0,H)])

    elif D == 0.0 :
        if C == 0.0 and A < W and B < H :
            ret = np.array([(0,A,0),(0,W,0),(0,W,H),(0,0,H),(0,0,B),(0,A,B)])

        if C != 0.0 and A < W and (B+C) < H :
            ret = np.array([(0,0,0),(0,W,0),(0,W,H),(0,D,H),(0,D,B+C),(0,D+A,B+C),(0,D+A,C),(0,D,C)])

        if C != 0.0 and A < W and (B+C) >= H :
            ret = np.array([(0,0,0),(0,W,0),(0,W,H),(0,A,H),(0,A,C),(0,0,C)])


    elif D != 0.0 :
        if C == 0.0 and (D+A) < W and B < H :
            ret = np.array([(0,0,0),(0,D,0),(0,D,B),(0,A+D,B),(0,A+D,0),(0,W,0),(0,W,H),(0,0,H)])
                
        if C != 0.0 and (A+D) < W and (B+C) >= H :
            ret = np.array([(0,0,0),(0,W,0),(0,W,H),(0,A+D,H),(0,A+D,C),(0,D,C),(0,D,H),(0,0,H)])

        if C == 0.0 and (A+D) >= W and B < H :
            ret = np.array([(0,0,0),(0,D,0),(0,D,B),(0,W,B),(0,W,H),(0,0,H)])

        if C != 0.0 and (A+D) >= W and (B+C) < H :
            ret = np.array([(0,0,0),(0,W,0),(0,W,C),(0,D,C),(0,D,B+C),(0,W,B+C),(0,W,H),(0,0,H)])

        if C != 0.0 and (A+D) >= W and (B+C) >= H :
            ret = np.array([(0,0,0),(0,W,0),(0,W,C),(0,D,C),(0,D,H),(0,0,H)])

    else :
        raise ValueError(f"Incorrect inputs : W={W}, H={H}, A={A}, B={B}, C={C}, D={D}")

    return ret

def fourSided(*args):
    W = args[0]
    H = args[1] 
    A = args[2]
    B = args[3]
    C = args[4]
    return np.array([(0,0,0),(0,W,0),(0,A+C,H),(0,A,B)])

def fiveSided(*args):
    W = args[0]
    H = args[1] 
    A = args[2]
    B = args[3]
    C = args[4]
    D = args[5]
    return np.array([(0,0,0),(0,W,0),(0,W+C,D),(0,A+B,H),(0,A,H)])

</pre>
</div>
</div>
-->


<div class="section" id="id4">
<h2>Transformation to 3D position<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>After all 2D shapes have been defined with their origin at (0,0,0), one can transform a shape to its 3D position by rotating and translating. The rotating angles and the new 3D position of origin are designated as follow.</p>
<img alt="_images/shapes_rotation.png" src="_images/shapes_rotation.png" height="600" width="600" />
<p>Accordingly, the transformation matrix is </p>
<img alt="_images/matrix.PNG" src="_images/matrix.PNG" height="400" width="400"/>

<div class="admonition note">
<p class="admonition-title">Example 1</p>
<p>A cubic box</p>
</div>

<img alt="_images/matrix.PNG" src="_images/boxFunction.PNG" height="350" width="350"/>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
import numpy as np
from VisualShape3D.Shapes import *

def box3D(L,W,H):
    rectLW = rectangle(L,W)
    rectWH = rectangle(W,H)
    rectLH = rectangle(L,H)
    
    bottom = move(shape = rectLW,to = (0,0,0), by = (0,-90) )
    top    = move(shape = rectLW,to = (W,0,H), by = (0, 90) ) 
    
    front = move(shape = rectLH,to = (W,0,0), by = (0,0) ) 
    back  = move(shape = rectLH,to = (0,L,0), by = (180,0) )

    left  = move(shape = rectWH,to = (0,0,0),by = (-90, 0))
    right = move(shape = rectWH,to = (W,L,0),by = ( 90, 0)) 
    
    polygons = np.array([front,right,back,left,top,bottom])
    
    return polygons

%matplotlib notebook
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d.art3d import Poly3DCollection
import matplotlib.pyplot as plt

polygons = box3D(1,0.7,0.5)

fig = plt.figure()
ax = Axes3D(fig)
box = Poly3DCollection(polygons)
box.set_facecolor('brown')
box.set_edgecolor('yellow')
ax.add_collection3d(box)
ax.axis('off')
plt.show()
</pre>
</div>
</div>
<img alt="_images/matrix.PNG" src="_images/box3D.PNG" height="350" width="350"/>

<div class="admonition note">
<p class="admonition-title">Example 2</p>
<p>A simple house</p>
</div>

<img alt="_images/matrix.PNG" src="_images/houseFunction.PNG" height="350" width="350"/>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
import numpy as np
from VisualShape3D.Shapes import *

def house3D(L,W,H,A,B,C,D):
    rectLW = rectangle(L,W)
    rectWH = rectangle(W,H)
    rectLH = rectangle(L,H)
    rectLH_window = rectangleWithHole(L,H,A,B,C,D)
    
    bottom = move(shape = rectLW,to = (0,0,0), by = (0,-90) )
    top    = move(shape = rectLW,to = (W,0,H), by = (0, 90) ) 
    
    front = move(shape = rectLH_window,to = (W,0,0), by = (0,0) ) 
    back  = move(shape = rectLH,to = (0,L,0), by = (180,0) )

    left  = move(shape = rectWH,to = (0,0,0),by = (-90, 0))
    right = move(shape = rectWH,to = (W,L,0),by = ( 90, 0)) 
    
    polygons = np.array([front,right,back,left,top,bottom])
    
    return polygons

%matplotlib notebook
from mpl_toolkits.mplot3d import Axes3D
from mpl_toolkits.mplot3d.art3d import Poly3DCollection
import matplotlib.pyplot as plt

L,W,H,A,B,C,D = 3,3,2.5,1.5,1.0,1.0,0.7
box = Poly3DCollection(house3D(L,W,H,A,B,C,D))

fig = plt.figure()
ax = Axes3D(fig)
box.set_facecolor('brown')
box.set_edgecolor('yellow')
ax.add_collection3d(box)
ax.axis('off')
plt.show()
</pre>
</div>
</div>
<img alt="_images/matrix.PNG" src="_images/house3D.PNG" height="350" width="350"/>
<!--
<h3>Function list for transformation of 2D shapes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="doctest highlight-default notranslate">
<div class="highlight"><pre>
def tranMatrix(alpha, beta):
    al = radians(alpha)
    be = radians(beta)
    X = [cos(be)*cos(al), -sin(al), -sin(be)*cos(al)]
    Y = [cos(be)*sin(al),  cos(al), -sin(be)*sin(al)]
    Z = [sin(be), 0, cos(be)]
    return np.vstack([X,Y,Z])

def move(shape = rectangle(1.0,1.0), reference = (0.0,0.0,0.0), to = (0.0,0.0,0.0), by = (30.0,0.0)):
    (alpha, beta) = by
    vertices = shape
    if vertices.shape[1] == 2:
        vertices = np.hstack((add_col(vertices.shape[0])*0, vertices))
    
    facet = vertices.transpose() 

    R1 = np.array(reference).reshape(-1,1) 
    R2 = np.array(to).reshape(-1,1)
    dR = R2 - R1

    U = tranMatrix(alpha,beta)
    facet_new = U.dot(facet) + dR

    return facet_new.transpose()
</pre>
</div>
</div>

</div>
</div>
-->

           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pointXLine%20or%20polygon.html" class="btn btn-neutral float-right" title="Point inside line and plane." accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="creating%20point%20line%20polygon.html" class="btn btn-neutral float-left" title="Creation of point, line and polygon." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, HHH.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>