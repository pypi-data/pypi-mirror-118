window.spa=function(e){function t(t){for(var o,i,a=t[0],l=t[1],f=t[2],u=0,p=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,f||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={5:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/bundle/";var a=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var f=0;f<a.length;f++)t(a[f]);var c=l;return r.push([324,0,2,4,1]),n()}({312:function(e,t,n){var o=n(4),s=n(313);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var r={insert:"head",singleton:!1};o(s,r);e.exports=s.locals||{}},313:function(e,t,n){(t=n(5)(!1)).push([e.i,".ansi-black-fg{color:#000000}.ansi-red-fg{color:#ff6060}.ansi-green-fg{color:#60ff60}.ansi-yellow-fg{color:#ffff36}.ansi-blue-fg{color:#6060ff}.ansi-magenta-fg{color:#ff36ff}.ansi-cyan-fg{color:#36ffff}.ansi-white-fg{color:#ececec}.ansi-bright-black-fg{color:#363636}.ansi-bright-red-fg{color:#ff8080}.ansi-bright-green-fg{color:#80ff80}.ansi-bright-yellow-fg{color:#ffff80}.ansi-bright-blue-fg{color:#8080ff}.ansi-bright-magenta-fg{color:#ff80ff}.ansi-bright-cyan-fg{color:#80ffff}.ansi-bright-white-fg{color:#ffffff}.ansi-black-bg{background-color:#000000}.ansi-red-bg{background-color:#ff6060}.ansi-green-bg{background-color:#60ff60}.ansi-yellow-bg{background-color:#ffff36}.ansi-blue-bg{background-color:#6060ff}.ansi-magenta-bg{background-color:#ff36ff}.ansi-cyan-bg{background-color:#36ffff}.ansi-white-bg{background-color:#ececec}.ansi-bright-black-bg{background-color:#363636}.ansi-bright-red-bg{background-color:#ff8080}.ansi-bright-green-bg{background-color:#80ff80}.ansi-bright-yellow-bg{background-color:#ffff80}.ansi-bright-blue-bg{background-color:#8080ff}.ansi-bright-magenta-bg{background-color:#ff80ff}.ansi-bright-cyan-bg{background-color:#80ffff}.ansi-bright-white-bg{background-color:#ffffff}\n",""]),e.exports=t},324:function(e,t,n){"use strict";n.r(t),n.d(t,"TabSignal",(function(){return y.a})),n.d(t,"signals",(function(){return C.a})),n.d(t,"colors",(function(){return o})),n.d(t,"ComponentsRegistrator",(function(){return l.a})),n.d(t,"globalComponentsRegistrator",(function(){return l.b})),n.d(t,"AppRoot",(function(){return u.a})),n.d(t,"utils",(function(){return c})),n.d(t,"guiCustomizer",(function(){return E})),n.d(t,"setupVue",(function(){return U})),n.d(t,"popUp",(function(){return f})),n.d(t,"fields",(function(){return q})),n.d(t,"components",(function(){return D})),n.d(t,"models",(function(){return b})),n.d(t,"querySet",(function(){return m})),n.d(t,"views",(function(){return d})),n.d(t,"store",(function(){return h})),n.d(t,"router",(function(){return w})),n.d(t,"api",(function(){return a})),n.d(t,"users",(function(){return Q})),n.d(t,"App",(function(){return B}));var o={};n.r(o),n.d(o,"AnsiUp",(function(){return L.a})),n.d(o,"ansiToHTML",(function(){return I}));var s=n(8),r=n(152),i=n.n(r),a=n(11),l=n(10),f=n(6),c=n(0),u=n(57),p=n(154),g=n(25);var d=n(35),h=n(27),b=n(20),w=n(56),m=n(40),v=n(64),y=n.n(v),C=n(7),k=(n(15),n(286),n(287),n(289),n(291),n(84),n(13)),R=n.n(k),_=(n(295),n(80)),M=n.n(_),T=n(82),j=n.n(T),x=n(14),F=(n(296),n(61)),S=n.n(F),V=(n(298),n(79)),O=n.n(V),A=(n(87),n(88),n(89)),L=n.n(A);n(312);const P=new L.a;function I(e){return P.ansi_to_html(e).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}P.use_classes=!0;var E=n(151),U=n(146),q=n(18),D=n(149),Q=n(150);n(148);window.SELECT2_THEME="bootstrap",n(292),n(293),window.moment=R.a,window.md5=M.a,window.Visibility=j.a,window.IMask=x.a,window.iziToast=S.a,window.autoComplete=O.a;class B extends class{constructor(e,t){this.config=e,this.schema=e.schema,this.router=null,this.cache=t,this.i18n=g.a,this.api=a.apiConnector.initConfiguration(e),this.translationsManager=new p.a(a.apiConnector,t),this.centrifugoClient=function(e,t){if(!e)return null;const n=new i.a(new URL("connection/websocket",e).toString());return t&&n.setToken(t),n}(this.schema.info["x-centrifugo-address"],this.schema.info["x-centrifugo-token"]),this.error_handler=new f.ErrorHandler,this.languages=null,this.rawUser=null,this.user=null,this.global_components=l.b,this.appRootComponent=u.a}afterInitialDataBeforeMount(){}async start(){this.centrifugoClient&&this.centrifugoClient.connect();const[e,t,n]=await Promise.all([this.translationsManager.getLanguages(),this.translationsManager.getTranslations(this.i18n.locale),this.api.loadUser()]);this.languages=e,this.i18n.messages[this.i18n.locale]=t,this.rawUser=n,this.setLanguage(this.i18n.locale),this.afterInitialDataBeforeMount();const o=this.views.get("/user/").objects,s=o.getModelClass(c.RequestTypes.RETRIEVE);this.user=new s(this.rawUser,o),this.global_components.registerAll(),this.prepare()}changeAppRootComponent(e){this.appRootComponent=e}resetAppRootComponent(){this.appRootComponent=u.a}prepare(){}}{constructor(e,t,n,o){super(e,t),this.fieldsClasses=n,this.getFieldFormat=Object(q.getFieldFormatFactory)(n),this.getField=Object(q.getFieldFactory)(n),this.modelsClasses=o,this.views=null,this.modelsResolver=null,this.qsResolver=null,this.application=null}getCurrentViewPath(){var e,t;return null===(e=this.application.$refs.currentViewComponent)||void 0===e||null===(t=e.view)||void 0===t?void 0:t.path}afterInitialDataBeforeMount(){this.prepareFieldsClasses(),new b.ModelConstructor(a.openapi_dictionary,this.config.schema,this.fieldsClasses,this.modelsClasses).generateModels(),this.modelsResolver=new b.ModelsResolver(this.modelsClasses,this.fieldsClasses,this.config.schema),this.views=new d.ViewConstructor(a.openapi_dictionary,this.modelsClasses,this.fieldsClasses).generateViews(this.config.schema),this.viewsTree=new d.ViewsTree(this.views),this.qsResolver=new m.QuerySetsResolver(this.viewsTree),this.setNestedViewsQuerysets()}prepareFieldsClasses(){for(const e of this.fieldsClasses.values())e.app=this}prepareViewsModelsFields(){for(const[e,t]of this.views){const n=new Set;if(t.objects)for(const e of Object.values(t.objects.models))if(Array.isArray(e))for(const t of e)n.add(t);else n.add(e);if(t.modelsList)for(const e of t.modelsList)e&&n.add(e);for(const t of n)if(t)for(const n of t.fields.values())n.prepareFieldForView(e);if(t.filters)for(const n of Object.values(t.filters))n.prepareFieldForView(e)}}setNestedViewsQuerysets(){for(const e of this.views.values())if(e instanceof d.PageNewView&&e.nestedAllowAppend){const t=e.listView,n=t.objects.getResponseModelClass(c.RequestTypes.LIST).name;try{t.nestedQueryset=this.qsResolver.findQuerySetForNested(n,t.path)}catch(n){console.warn(n),e.nestedAllowAppend=!1,t.actions.delete("add")}}}setLanguage(e){return this._prefetchTranslation(e).then(()=>(this.i18n.locale=e,c.guiLocalSettings.set("lang",e),C.a.emit("app.language.changed",{lang:e}),document.documentElement.setAttribute("lang",e),document.cookie="lang=".concat(e),e))}_prefetchTranslation(e){return this.languages.find(t=>t.code===e)?this.translationsManager.getTranslations(e).then(t=>this.i18n.setLocaleMessage(e,t)):Promise.reject(!1)}prepare(){C.a.emit("app.beforeInit",{app:this}),this.prepareViewsModelsFields();let e=new h.StoreConstructor(this,this.config.isDebug);C.a.emit("app.beforeInitStore",{storeConstructor:e});let t=new w.RouterConstructor(this.views,w.mixins.routesComponentsTemplates,w.mixins.customRoutesComponentsTemplates);C.a.emit("app.beforeInitRouter",{routerConstructor:t}),this.router=t.getRouter(),s.default.prototype.$app=this,s.default.prototype.$u=c,this.application=new s.default({mixins:[this.appRootComponent],propsData:{info:this.config.schema.info,x_menu:this.config.schema.info["x-menu"],x_docs:this.config.schema.info["x-docs"]},router:this.router,store:e.getStore(),i18n:this.i18n}),C.a.emit("app.afterInit",{app:this})}mount(){this.application.$mount("#RealBody")}}window.App=B}});