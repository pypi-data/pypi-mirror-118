#!/usr/bin/env python
# coding: utf-8

# ## portait数据集转为voc数据集格式

# 
# ![image.png](data:image/png;base64,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)
# 
# ```
# Annotations        JPEGImages         SegmentationObject
# ImageSets          SegmentationClass
# ```

# JPEGImages 存放源图片  
# SegmentationClass 存放标签图片  
# ImageSets 存放txt文件，txt中是图片名称
# 

# In[1]:


# -*- coding: utf-8 -*-
"""
# @file name  : gen_dataset.py
# @brief      : portrait 2000， 生成voc数据集格式
"""
import os
import shutil
import random

random.seed(123)

BASE_DIR = os.getcwd()

def make_dir(dst_dir):
    if not os.path.exists(dst_dir):
        os.makedirs(dst_dir)


# In[2]:


# root_dir = r"G:\deep_learning_data\EG_dataset\dataset"
# out_dir = r"G:\deep_learning_data\EG_dataset\voc_format"
root_dir = os.path.join(BASE_DIR, "..", "data", "dataset")
out_dir = os.path.join(BASE_DIR, "..", "data", "dataset", "voc_format")
train_per = 0.9

if os.path.exists(out_dir):
    
    shutil.rmtree(out_dir)
    print("删除存在的目录:{}".format(out_dir))


# 读取所有数据集
img_list = []
for root, dirs, files in os.walk(root_dir):
    for file in files:
        if file.endswith(".png") and not file.endswith("matte.png"):
            path_img = os.path.join(root, file)
            img_list.append(path_img)

print("从{}文件夹下找到了{}张png图片".format(root_dir, len(img_list)))


# In[3]:


# 1、随机划分
random.shuffle(img_list)

split_point = int(len(img_list) * train_per)
train_list = img_list[:split_point]
valid_list = img_list[split_point:]
train_msk_list = [i[:-4] + "_matte.png" for i in train_list]
valid_msk_list = [i[:-4] + "_matte.png" for i in valid_list]
print("按比例划分得到:{}训练，{}验证".format(len(train_list), len(valid_list)))


# In[ ]:


# 2、复制图片
def cp_batch(path_lst, dst_dir):
    for idx, p in enumerate(path_lst):
        src_path = p
        file_name = os.path.basename(p)
        base_dir = os.path.dirname(p)
        set_name = os.path.basename(base_dir)
        new_file_name = set_name + "_" + file_name
        dst_path = os.path.join(dst_dir, new_file_name)
        shutil.copy(src_path, dst_path)
        print("\r{}/{}".format(idx, len(path_lst)), end="", flush=True)


out_img_dir = os.path.join(out_dir, "JPEGImages")
out_msk_dir = os.path.join(out_dir, "SegmentationClass")
make_dir(out_img_dir)
make_dir(out_msk_dir)

cp_batch(train_list + valid_list, out_img_dir)
cp_batch(train_msk_list + valid_msk_list, out_msk_dir)
print("按照VOC数据集目录形式，将数据存放于:{}\n标签存放于:{}".format(out_img_dir, out_msk_dir))


# In[8]:


# 3、生成txt
txt_dir = os.path.join(out_dir, "ImageSets", "Segmentation")
make_dir(txt_dir)
path_train_txt = os.path.join(txt_dir, "train.txt")
path_valid_txt = os.path.join(txt_dir, "val.txt")

def gen_txt(path_lst, path_txt):
    "根据文件名生成txt文件"
    with open(path_txt, "w") as f:
        for path in path_lst:
            p = path
            file_name = os.path.basename(p)
            base_dir = os.path.dirname(p)
            set_name = os.path.basename(base_dir)
            new_file_name = set_name + "_" + file_name[:-4]
            f.writelines(str(new_file_name) + "\n")
    print("write done, path:{}".format(path_txt))


gen_txt(train_list, path_train_txt)
gen_txt(valid_list, path_valid_txt)


# In[ ]:




